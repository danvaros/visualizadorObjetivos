<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Objetivos de Desarrollo Sostenible</title>

    <link rel="stylesheet" type="text/css" href="tooltipster/dist/css/tooltipster.bundle.min.css" />
	  <link rel="stylesheet" type="text/css" href="tooltipster/dist/css/plugins/tooltipster/sideTip/themes/tooltipster-sideTip-light.min.css" />
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/icon?family=Material+Icons" >
    <link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/css/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Raleway:400,700,800,300,600italic,600" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="https://npmcdn.com/leaflet@1.0.0-rc.3/dist/leaflet.css" />

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="css/home.css">
    <!-- Load c3.css -->
  	<link href="lib/c3.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="css/section-scroll.css">

<style media="screen">
svg g.c3-chart-line g.c3-circles-Estados-Unidos-Mexicanos circle{
  fill: #f00 !important;
}

#datosNacional{
  display: none;
}

  .infoPadre{
    width: 276px;
}

  .cuadrosSocial li {
    display: inline;
}

.cuadrosSocial li a{
  border: 1px solid #ccc;
  padding: 10px;
  transition: all 1.0s ease;
  width: 40px;
}


.cuadrosSocial li a:hover {
  background-color: #ccc;

}

.select-dropdown{
  padding-left: 10px !important;
}


.select-wrapper span.caret{
  padding-right: 10px;
  font-size: 14px;
  color: #666;
}

.espacio_seccion{
  height: 40px;
}



.promedios{
  font-size: 40px !important;
  font-weight: 200;
}

.topColor{
  color: #3ebcef;
}


.section-bullets li a:before {
    background-color: #00aeef;
}


.section-bullets li:hover {
    background-color: #eee;
}

.section-bullets .active a {
  color: #fff;
}

 .section-bullets .active a:after {
    background-color: #FFF;
}

.line_pro{
  border-bottom: #F44336;
  border: solid 1px #F44336;
  margin: 10px;
  max-width: 32%;
}

.active_anio
{
  background-color: #15b5f0;
  color: white;
}

.inactive_anio
{
  background-color: white;
  color: #15b5f0;
}

</style>


    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="tooltipster/dist/js/tooltipster.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/js/materialize.min.js"></script>
    <script src="image.js"></script>
    <script type="text/javascript" src="http://gabelerner.github.io/canvg/rgbcolor.js"></script>
    <script type="text/javascript" src="http://gabelerner.github.io/canvg/StackBlur.js"></script>
    <script type="text/javascript" src="http://gabelerner.github.io/canvg/canvg.js"></script>

    <script type="text/javascript" src="lib/jquery.section-scroll.js"></script>
  </head>
  <body>
    <div class="navbar-fixed">
      <nav>
        <div class="nav-wrapper">
          <a href="index.html" class="brand-logo"><img src="img/logo.png" alt="" /></a>
          <a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a>
          <ul id="nav-mobile" class="right hide-on-med-and-down nav_sticky">
            <li class="tam t_sm"><a class="t_sm" href="objetivos.html">Indicadores</a></li>
            <li class="tam t_sm"><a class="t_sm" href="estados.html">Indicadores con desglose geográfico</a></li>
            <li class="tam t_sm"><a class="t_sm" href="como_vamos.html">¿C&oacute;mo vamos?</a></li>
            <li class="tam t_sm"><a class="t_sm" href="explora.html">Explora</a></li>
            <li class="tam t_sm"><a class="t_sm" href="compara.html">Compara</a></li>
            <li class="tamps">
              <a id="buscar"><img src="img/search.png" alt="" /></a>
              <input id="cam_bus" type="text" name="buscar" style="display: none; background-color: rgba(0, 0, 0, 0.4); background-position: 95% 50%; background-repeat: no-repeat;border-bottom: 0 none; border-radius: 8px;color: #ffffff !important;padding: 0 0px;height:35px;" onfocusout="esconder()"/>
            </li>
               <li class="tamps"> <a id="buscar"><img data-position="bottom" data-tooltip="Ir al calendario de actualizaciones" class="tooltipped" src="img/calendario.png" alt="" /></a> </li>
            <li class="tamps"> <a id="buscar"><img data-position="bottom" data-tooltip="Ir a la página de descargas masivas" class=" tooltipped" src="img/descarga.png" alt="" /></a> </li>
          </ul>
          <ul class="side-nav" id="mobile-demo">
            <li><a href="objetivos.html">Indicadores</a></li>
            <li><a href="estados.html">Indicadores por unidad geográfica</a></li>
            <li><a href="como_vamos.html">¿C&oacute;mo vamos?</a></li>
            <li><a href="explora.html">Explora</a></li>
            <li><a href="compara.html">Compara</a></li>
          </ul>
        </div>
      </nav>
      <!-- <nav>
        <div class="nav-wrapper">
          <a href="index.html" class="brand-logo"><img src="img/logo.png" alt="" /></a>
          <a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a>
          <ul id="nav-mobile" class="right hide-on-med-and-down nav_sticky">
            <li class="tam t_sm"><a class="t_sm mActive" href="explora.html">Explora</a></li>
            <li class="tam t_sm"><a class="t_sm" href="compara.html">Compara</a></li>
            <li class="tam t_sm"><a class="t_sm" href="objetivos.html">Objetivos</a></li>
            <li class="tam t_sm"><a class="t_sm" href="estados.html">Indicadores con desglose geográfico</a></li>
            <li class="tam t_sm"><a class="t_sm" href="como_vamos.html">¿C&oacute;mo vamos?</a></li>
            <li class="tam t_sm"><a class="t_sm" href="acerca.html">Acerca de</a></li>
            <li>
              <a id="buscar"><img src="img/search.png" alt="" /></a>
              <input id="cam_bus" type="text" name="buscar" style="display: none; background-color: rgba(0, 0, 0, 0.4); background-position: 95% 50%; background-repeat: no-repeat;border-bottom: 0 none; border-radius: 8px;color: #ffffff !important;padding: 0 10px;height:35px;" />
            </li>
          </ul>
          <ul class="side-nav" id="mobile-demo">
            <li><a href="explora.html">Explora</a></li>
            <li><a href="compara.html">Compara</a></li>
            <li><a href="objetivos.html">Objetivos</a></li>
            <li><a href="estados.html">Indicadores por unidad geográfica</a></li>
            <li><a href="como_vamos.html">¿C&oacute;mo vamos?</a></li>
            <li><a href="acerca.html">Acerca de</a></li>
          </ul>
        </div>
      </nav> -->
    </div>
    <div class="container">
      <div class="row scrollable-section" data-section-title="Menú de selección" >
        <div class="col s12">
          <h3 class="fuerte t_principal">EXPLORA</h3>
          <li class="divider"></li>
          <br>
          <p class="gris t_sm">
          Esta sección permite visuallizar los indicadores de los cuales se dispone información para 11 de los 17 objetivos de la Agenda 2030 para el Desarrollo Sostenible. Igualmente ofrece la posiblilidad de filtrar la información por tipo de desagregación y unidades territoriales menores, en el caso de que esta se encuentre disponible, y exportarla para su manipulacion al igual que los materiales graficos que se generen por el usuario.
          </p>
        </div>
      </div>
      <div class="row">
        <div class="col s2" style="display: flex;">
          <p class="claro t_sm" style="display: inline-table; margin-top: 25px; margin-right: 20px;">1. Tipo de indicador</p>
        </div>
        <div class="col s5" style="display: flex;">
          <div class="input-field col s12 caja_s">
            <select id="agregacion">
              <option value="" disabled selected>Elige una opción</option>
              <option value="1">Nacional</option>
              <option value="2" selected>Estatal</option>
              <option value="3">Municipal</option>
            </select>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col s2" style="display: flex;">
          <p class="claro t_sm" style="display: inline-table; margin-top: 25px; margin-right: 63px;">2. Objetivo</p>
        </div>
        <div class="col s5" style="display: flex;">
          <div class="input-field col s12 caja_s">
            <select>
              <option value="" disabled selected>Elige una opción</option>
              <option value="1">Poner fin a la pobreza en todas sus formas en todo el mundo</option>
              <option value="2" selected>Garantizar una vida sana y promover el bienestar para todos en todas las edades</option>
              <option value="3">Garantizar una educación inclusiva, equitativa y de calidad y promover oportunidades de aprendizaje durante toda la vida para todos</option>
              <option value="1">Lograr la igualdad entre los géneros y el empoderamiento de todas las mujeres y niñas</option>
              <option value="1">Garantizar la disponibilidad de agua y su ordenación sostenible y el saneamiento para todos</option>
              <option value="1">Garantizar el acceso a una energía asequible, segura, sostenible y moderna para todos</option>
              <option value="1">Promover el crecimiento económico sostenido, inclusivo y sostenible, el empleo pleno y productivo y el trabajo decente para todos</option>
              <option value="1">Construir infraestructura resiliente, promover la industrialización inclusiva y sostenible y fomentar la innovación</option>
              <option value="2">Reducir la desigualdad en y entre los países</option>
              <option value="2">Lograr que las ciudades y los asentamientos humanos sean inclusivos, seguros, resilientes y sostenibles</option>
            </select>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col s2" style="display: flex;">
          <p class="claro t_sm" style="display: inline-table; margin-top: 25px; margin-right: 63px;">3. Indicador </p>
        </div>
        <div class="col s5" style="display: flex;">
            <div class="input-field col s12 caja_s">
            <select>
              <option value="" disabled selected>Elige una opcion</option>
              <option value="0" selected>Razón de mortalidad materna</option>
              <option value="1">Poner fin a la pobreza en todas sus formas en todo el mundo</option>
              <option value="2">Garantizar una vida sana y promover el bienestar para todos en todas las edades</option>
              <option value="3">Garantizar una educación inclusiva, equitativa y de calidad y promover oportunidades de aprendizaje durante toda la vida para todos</option>
              <option value="1">Lograr la igualdad entre los géneros y el empoderamiento de todas las mujeres y niñas</option>
              <option value="1">Garantizar la disponibilidad de agua y su ordenación sostenible y el saneamiento para todos</option>
              <option value="1">Garantizar el acceso a una energía asequible, segura, sostenible y moderna para todos</option>
              <option value="1">Promover el crecimiento económico sostenido, inclusivo y sostenible, el empleo pleno y productivo y el trabajo decente para todos</option>
              <option value="1">Construir infraestructura resiliente, promover la industrialización inclusiva y sostenible y fomentar la innovación</option>
              <option value="2">Reducir la desigualdad en y entre los países</option>
              <option value="2">Lograr que las ciudades y los asentamientos humanos sean inclusivos, seguros, resilientes y sostenibles</option>				    </select>
          </div>
        </div>
      </div>
      <div class="espacio_seccion"></div>
      <div class="row scrollable-section" data-section-title="Mapa" id="mapa">
          <div class="col s12">
            <div id="map"></div>
            <div class="row" id="footmap">
	            <div id="anios" class="col s8">
	            	<a class="waves-effect waves-light btn color  black-text t_sm sin_sombra marg_top" style="border-style: none;">Año</a>
		            <a class="waves-effect waves-light btn color  claro t_sm sin_sombra marg_top" style ="margin-right: -5px; border-color: black; border-width: 1px; border-radius: 5px 0px 0px 5px;">2013</a>
		            <a class="waves-effect waves-light btn color  claro t_sm sin_sombra marg_top" style ="margin-right: -5px; border-color: black; border-width: 1px; border-radius: 0;">2014</a>
		            <a class="waves-effect waves-light btn color  claro t_sm sin_sombra marg_top" style ="margin-right: -5px; border-color: black; border-width: 1px; border-radius: 0px 5px 5px 0px;">2015</a>
	            </div>
	            <div class="col s4" >
                    <a class="waves-effect waves-light btn color claro t_sm sin_sombra marg_top modal-trigger" href="#modalMapa" style="width: 250px;">Comparte este mapa</a>
	            </div>
            </div>
          </div>
      </div>
      <br><br><br>
      <div class="row scrollable-section" data-section-title="Gráfica" id="grafica">
        <div class="col s12">
          <h3 class="fuerte t_principal">Evolución del indicador en el tiempo</h3>
          <li class="divider"></li>
          <br><br>
          <div id="chart2"></div>
          <div class="col s4" style="margin-top: 40px;">
            <div class="col s1 line_pro"></div>
            <div class="col s6">
              Promedio nacional
            </div>
          </div>
          <div class="col s4 offset-s4">
                <a class="waves-effect waves-light btn color claro t_sm sin_sombra marg_top modal-trigger" href="#modalGrafica" style="width: 250px;">Comparte esta gráfica</a>
          </div>
        </div>
      </div>
      <div id="datosEstatal">
        <div class="row scrollable-section" data-section-title="Tablas" >
          <div class="col s12">
            <h3 class="fuerte t_principal">Top 3 estados</h3>
            <li class="divider"></li>
          </div>
        </div>

        <div class="row">
          <div class="col s4">
            <h4 class="fuerte t_principal topColor"><strong>1</strong></h4>
            <h2 class="promedios">Chiapas</h2>
            <h4 class="fuerte t_principal"><strong>13.1</strong></h4>
          </div>
          <div class="col s4">
            <h4 class="fuerte t_principal topColor"><strong>2</strong></h4>
            <h2 class="promedios">Guerrero </h2>
            <h4 class="fuerte t_principal"><strong>13.1</strong></h4>
          </div>
          <div class="col s4">
            <h4 class="fuerte t_principal topColor"><strong>3</strong></h4>
            <h2 class="promedios">Oaxaca</h2>
            <h4 class="fuerte t_principal"><strong>13.1</strong></h4>
          </div>
        </div>

        <div class="row">
          <div class="col s12">
            <h3 class="fuerte t_principal">Top 3 con más avance</h3>
            <li class="divider"></li>
          </div>
        </div>

        <div class="row">
          <div class="col s4">
            <h4 class="fuerte t_principal topColor"><strong>1</strong></h4>
            <h2 class="promedios">Chiapas</h2>
            <h4 class="fuerte t_principal"><strong>13.1</strong></h4>
          </div>
          <div class="col s4">
            <h4 class="fuerte t_principal topColor"><strong>2</strong></h4>
            <h2 class="promedios">Guerrero </h2>
            <h4 class="fuerte t_principal"><strong>13.1</strong></h4>
          </div>
          <div class="col s4">
            <h4 class="fuerte t_principal topColor"><strong>3</strong></h4>
            <h2 class="promedios">Oaxaca</h2>
            <h4 class="fuerte t_principal"><strong>13.1</strong></h4>
          </div>
        </div>
      </div>

      <div id="datosNacional">
        <div class="row">
          <div class="col s12">
            <h3 class="fuerte t_principal">Promedio regional y global</h3>
            <li class="divider"></li>
          </div>
        </div>

        <div class="row">
          <div class="col s4">
            <h2 class="promedios">Nacional</h2>
            <h4 class="fuerte t_principal"><strong>13.1</strong></h4>
          </div>
          <div class="col s4">
            <h2 class="promedios">Regional</h2>
            <h4 class="fuerte t_principal"><strong>13.1</strong></h4>
          </div>
          <div class="col s4">
            <h2 class="promedios">Nacional</h2>
            <h4 class="fuerte t_principal"><strong>13.1</strong></h4>
          </div>
        </div>
      </div>

      <div class="row scrollable-section" data-section-title="Descarga de datos">
        <div class="col s12">
          <h3 class="fuerte t_principal">Datos</h3>
          <li class="divider"></li>
          <div class="row">
          	<div class="col s10 offset-s1">
          		<div class="row">
          			<div class="col s6">
          				<p class="fuerte t_normal">Nombre</p>
		  			    </div>
    		  			<div class="col s2">
              				<p class="fuerte t_normal">Institución</p>
    		  			</div>
    		  			<div class="col s4">
              				<p class="fuerte t_normal">Formato</p>
    		  			</div>
    		  			<div class="col s12">
              				<li class="divider griss"></li>
    		  			</div>
    		  			<div class="col s6">
              				<p class="gris t_sm">Indicadores Objetivo 1 ODS</p>
    		  			</div>
    		  			<div class="col s2">
              				<p class="gris t_sm">ODS</p>
    		  			</div>
    		  			<div class="col s4" style="margin-top: 10px;">
              				<a class="icn">CSV</a><a class="icns">XLS</a> <a class="icnSDMX">SDMX</a><a class="icnPDF">PDF</a>
    		  			</div>
    		  			<div class="col s12">
              				<li class="divider griss"></li>
    		  			</div>
          		</div>
          	</div>
          </div>
        </div>
      </div>
    </div>


    <footer class="page-footer id">
      <div class="container">
        <div class="row" id="fot">
          <div class="col l3 s12">
            <a href="home.html"><img src="img/ods_logo_home2.png" alt="" /></a>
            <br>
            <br>
            <div class="" style="display:inline;">
              <a href="https://www.facebook.com" style="margin-right: 12%;"><img src="img/fill2.png" alt="" style="width:3%;"/></a>
              <a href="https://twitter.com" style="margin-right: 12%;"><img src="img/fill1.png" alt="" style="width:7%;"/></a>
              <a href="#"><img src="img/fill3.png" alt="" style="width:7%;"/></a>
            </div>
          </div>
          <div class="col l3 s12">
            <ul class="fuerte">
              <li><a class="fuerte t_sm" href="objetivos.html">Indicadores</a></li>
              <li><a class="fuerte t_sm" href="estados.html">Indicadores con desglose geográfico</a></li>
              <li><a class="fuerte t_sm" href="como_vamos.html">¿Cómo vamos?</a></li>
              <li><a class="fuerte t_sm" href="explora.html">Explora</a></li>
            </ul>
          </div>
          <div class="col l3 s12">
            <ul class="fuerte">
              <li><a class="fuerte t_sm" href="compara.html">Compara</a></li>
              <li class="fuerte t_sm">Calendario de actualizaciones</li>
              <li class="fuerte t_sm">Exportación masiva</li>
              <li><a class="fuerte t_sm" href="acerca.html">Acerca de</a></li>
            </ul>
          </div>
          <div class="col l3 s12" style="display:inline;">
            <a href="https://www.gob.mx" target="_blank"><img src="img/logoPR.png" alt="" style="width: 45%; margin-right: 15%;"/></a>
            <a href="http://www.inegi.org.mx" target="_blank"><img src="img/logoINEGI.png" alt="" style="width:25%;"/></a>
          </div>
        </div>
      </div>
      <div class="footer-copyright light-blue">
      </div>
    </footer>
    <!-- <footer class="page-footer id">
      <div class="container">
        <div class="row" id="fot">
          <div class="col l3 s12">
            <a href="home.html"><img src="img/ods_logo_home2.png" alt="" /></a>
            <br>
            <br>
            <div class="" style="display:inline;">
              <a href="https://www.facebook.com" style="margin-right: 12%;"><img src="img/fill2.png" alt="" style="width:3%;"/></a>
              <a href="https://twitter.com" style="margin-right: 12%;"><img src="img/fill1.png" alt="" style="width:7%;"/></a>
              <a href="#"><img src="img/fill3.png" alt="" style="width:7%;"/></a>
            </div>
          </div>
          <div class="col l3 s12">
            <ul class="fuerte">
              <li><a class="fuerte t_sm" href="explora.html">Explora</a></li>
              <li><a class="fuerte t_sm" href="compara.html">Compara</a></li>
              <li><a class="fuerte t_sm" href="objetivos.html">Objetivos</a></li>
              <li><a class="fuerte t_sm" href="estados.html">Indicadores con desglose geográfico</a></li>
            </ul>
          </div>
          <div class="col l3 s12">
            <ul class="fuerte">
              <li><a class="fuerte t_sm" href="como_vamos.html">¿Cómo vamos?</a></li>
              <li><a class="fuerte t_sm" href="acerca.html">Acerca de</a></li>
              <li class="fuerte t_sm">Calendario de actualizaciones</li>
              <li class="fuerte t_sm">Exportación masiva</li>
            </ul>
          </div>
          <div class="col l3 s12" style="display:inline;">
            <a href="https://www.gob.mx" target="_blank"><img src="img/logoPR.png" alt="" style="width: 45%; margin-right: 15%;"/></a>
            <a href="http://www.inegi.org.mx" target="_blank"><img src="img/logoINEGI.png" alt="" style="width:25%;"/></a>
          </div>
        </div>
      </div>
      <div class="footer-copyright light-blue">
      </div>
    </footer> -->




  <!-- Modal Structure -->
  <div id="modalMapa" class="modal">
    <div class="modal-content">
      <h5>Compartir</h5>
      <div class="row">
        <b>Redes Sociales</b>
        <ul class="cuadrosSocial">
          <li>
            <a class="waves-effect" href="https://twitter.com/intent/tweet?text=aqui va el texto;url=http://104.236.211.149/ods/compara.html#!"><i class="fa fa-twitter fa-lg"></i></a>
          </li>
          <li>
            <a class="waves-effect "><i class="fa fa-facebook fa-lg" style="padding-left: 4px;"></i></a>
          </li>
        </ul>
      </div>
      <div class="row">
        <i class="fa fa-code" aria-hidden="true"></i> <b>Embed</b>
        <div class="input-field col s12">
         <input placeholder="Placeholder" id="" type="text" class="validate" value="<script src='http://104.236.211.149/ods/embed.js'></script>">
         <label for="">Copia este código para insertar el mapa en una página HTML</label>
       </div>
      </div>

      <div class="row">
      <i class="fa fa-code" aria-hidden="true"></i> <b>Liga</b>
        <div class="input-field col s12">
            <input placeholder="Placeholder" id="" type="text" class="validate" value="http://104.236.211.149/ods/compara.html#mapa">
       </div>
      </div>

      <div class="row">
      <i class="fa fa-code" aria-hidden="true"></i> <b>PDF</b>
        <div class="input-field col s12">
            <a id="pdf_descarga" class="waves-effect btn color claro">Descargar PDF</a>
       </div>
      </div>
    <div class="modal-footer">
      <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Cerrar</a>
    </div>
  </div>
</div>

<!-- Modal Grafica -->
<div id="modalGrafica" class="modal">
  <div class="modal-content">
    <h5>Compartir</h5>
    <div class="row">
      <b>Redes Sociales</b>
      <ul class="cuadrosSocial">
        <li>

          <a class="waves-effect" href="https://twitter.com/intent/tweet?text=aqui va el texto;url=http://104.236.211.149/ods/compara.html#!"><i class="fa fa-twitter fa-lg"></i></a>

        </li>

        <li>
          <a class="waves-effect "><i class="fa fa-facebook fa-lg" style="padding-left: 4px;"></i></a>
        </li>

      </ul>
    </div>
    <div class="row">
      <i class="fa fa-code" aria-hidden="true"></i> <b>Embed</b>
      <div class="input-field col s12">
       <input placeholder="Placeholder" id="" type="text" class="validate" value="<script src='http://104.236.211.149/ods/embed.js'></script>">
       <label for="">Copia este código para insertar el mapa en una página HTML</label>
     </div>
    </div>

    <div class="row">
    <i class="fa fa-code" aria-hidden="true"></i> <b>Liga</b>
      <div class="input-field col s12">
          <input placeholder="Placeholder" id="" type="text" class="validate" value="http://104.236.211.149/ods/compara.html#grafica">
     </div>
    </div>

    <div class="row">
    <i class="fa fa-code" aria-hidden="true"></i> <b>PDF</b>
      <div class="input-field col s12">
          <a class="waves-effect btn color claro">Descargar PDF</a>
     </div>
    </div>
  <div class="modal-footer">
    <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Cerrar</a>
  </div>
</div>
</div>
<div class="row" style="display:none;">
  <div id="copia" style="width:100%; height:600px;"></div>
  <div id="copias" style="width:100%; height:600px;"></div>
  <div id="fondo" style="width:100%; height:600px;"></div>
  <div id="todo" style="width:1298px; height:600px;"></div>
  <div id="todo_listo" style="width:1298px; height:600px;"></div>
  <div id="images" style="width:100%; height:600px;"></div>
  <div id="forms" style="width:100%; height:600px;"></div>
</div>


    <script src="https://npmcdn.com/leaflet@1.0.0-rc.3/dist/leaflet.js"></script>
    <!-- <script type="text/javascript" src="entidad2.json"></script> -->
    <!-- <script type="text/javascript" src="entidadCompara.json"></script> -->
    <script type="text/javascript" src="entidad2.json"></script>
    <!-- <script type="text/javascript" src="estados_indicador3.js"></script> -->
    <script type="text/javascript" src="variable.js"></script>
    <script type="text/javascript" src="municipio.json"></script>
    <script type="text/javascript" src="nacion.json"></script>

    <!-- Load d3.js and c3.js -->
  <script src="lib/d3.v3.min.js" charset="utf-8"></script>
  <script src="lib/c3.min.js"></script>
  <script src="classybrew/build/classybrew.min.js"></script>

  <script type="text/javascript" src="http://canvg.github.io/canvg/rgbcolor.js"></script>
  <script type="text/javascript" src="http://canvg.github.io/canvg/StackBlur.js"></script>
  <script type="text/javascript" src="http://canvg.github.io/canvg/canvg.js"></script>
  <script type="text/javascript" src="lib/html2canvas.js"></script>
  <script type="text/javascript">
  var normal,fondo,todo;
    $(document).ready(function()
    {

      var lupa =  false;
      $('#buscar').click(function(){
        if(lupa){
          $('#cam_bus').hide();
          lupa =  false;
        }else{
          $('#cam_bus').show();
          $('#buscar').hide();
          lupa =  true;
        }
      });


      $(".button-collapse").sideNav();

      var nacional =  false;

      $('.modal-trigger').leanModal();
      $('select').material_select();
      $('.collapsible').collapsible(
        {
          accordion : true
        });

      console.log($('#objetivos').find('li.active').children().children());


      $('#agregacion').on('change', function (e)
      {
          if(this.value == 1){
            $('#footmap').slideToggle("slow");
            $('#map').slideToggle("slow");
            $('#datosEstatal').slideToggle();
            $('#datosNacional').slideToggle();
            nacional =  true ;
          }
          else{
            if(nacional)
            {
              $('#footmap').slideToggle("slow");
              $('#map').slideToggle("slow");
              $('#datosEstatal').slideToggle( );
              $('#datosNacional').slideToggle( );
              nacional =  false ;
            }
          }
      });
  });

    </script>
      <script type="text/javascript">
	  function commaSeparateNumber(x){var parts=x.toString().split(".");parts[0]=parts[0].replace(/\B(?=(\d{3})+(?!\d))/g,",");return parts.join(".");}


		  var chart2 = c3.generate({
			bindto: '#chart2',
      size: {
            height: 500
          },
		    data: {
		        x: 'Entidad',
 		        columns: estados,

//[
// 		            ['x', '2009-01-01', '2010-01-01', '2011-01-01', '2012-01-01', '2013-01-01'],
// 		           ['Aguascalientes',      '122.24', '104.54',    '120.4',       '122.8',       '110.4'],
// ['Baja California  ',   '93.05',  '108.39',    '92.3',        '86.6',        '86.8'],
// ['Baja California Sur', '54.22',  '53.06',     '57',          '64.8',        '68.6'],
// ['Campeche',            '4.76',   '4.78',      '6.6',         '5.8',         '4.5'],
// ['Chiapas',             '15.8',   '20.36',     '16.6',        '18.9',        '18.5'],
// ['Chihuahua',           '64.18',  '68.05',     '68.1',        '72.8',        '74.4'],
// ['Coahuila',            '46.07',  '48.3',      '45.1',        '46.4',        '45.2'],
// ['Colima',              '43.64',  '51',        '51.7',        '52.1',        '59.6'],
// ['Distrito Federal',    '14.22',  '14.82',     '14.8',        '13.9',        '13.6'],
// ['Durango',             '57.85',  '59.15',     '61.8',        '65',          '60.6'],
// ['Guanajuato',          '46.08',  '45.38',     '46.6',        '50.2',        '59'],
// ['Guerrero',            '47.93',  '60.49',     '56.4',        '57.6',        '74.2'],
// ['Hidalgo',             '9.66',   '12',        '12',          '6.8',         '5.4'],
// ['Jalisco',             '23.37',  '25.75',     '35.5',        '46.3',        '51.9'],
// ['MÃ©xico',             '20.04',  '23.64',     '24.8',        '28',          '28.4'],
// ['Michoacán',           '26.06',  '26.59',     '26.4',        '27.3',        '32.1'],
// ['Morelos',             '18.82',  '18.79',     '25.4',        '26.4',        '23.5'],
// ['Nayarit',             '65.34',  '72.86',     '72.9',        '83.4',        '104.1'],
// ['Nuevo León ',         '118.42', '112.14',    '108.3',       '109.5',       '117.2'],
// ['Oaxaca',              '27.4',   '28.18',     '27.6',        '28.4',        '33.3'],
// ['Puebla',              '35.49',  '36.59',     '46.1',        '43',          '53.9'],
// ['Querétaro',           '22.65',  '41.51',     '41.3',        '42.3',        '45.5'],
// ['Quintana Roo ',       '60.49',  '57.37',     '61.5',        '55.6',        '55.6'],
// ['San Luis Potosí',     '47.74',  '48.66',     '47.7',        '49.1',        '53.2'],
// ['Sinaloa',             '61.82',  '66.08',     '68.8',        '71.6',        '68'],
// ['Sonora',              '31.65',  '31.76',     '32',          '34.9',        '34.6'],
// ['Tabasco',             '18.31',  '19.93',     '19.9',        '20.7',        '25.3'],
// ['Tamaulipas',          '53.87',  '59.85',     '73.4',        '75.6',        '71.8'],
// ['Tlaxcala',            '53.49',  '54.42',     '49.1',        '48.4',        '43.1'],
// ['Veracruz',            '25.73',  '28.14',     '32.7',        '34.9',        '39.6'],
// ['Yucatán',             '1.63',   '2.65',      '2.1',         '2.1',         '2.6'],
// ['Zacatecas',           '13.79',  '18.81',     '21.4',        '23.1',        '35.5'],
// ['Promedio nacional',            '42.0565625',  '44.50125',     '45.821875',        '47.321875',        '50']
// 		        ]
		    },
		    legend: {
				show: false
				},
			padding: {
		        left: 40,
		        right: 30
		    },
		    point: {
			  show: true
			},
			color: {
		        pattern:['#ccc','#ccc','#ccc','#ccc','#ccc','#ccc','#ccc','#ccc','#ccc','#ccc','#ccc','#ccc','#ccc','#ccc','#ccc','#ccc','#ccc','#ccc','#ccc','#ccc','#ccc','#ccc','#ccc','#ccc','#ccc','#ccc','#ccc','#ccc','#ccc','#ccc','#ccc','#ccc','#f00']
		    },

		    axis : {
		        x : {
		            type : 'timeseries',
		            tick: {
                    rotate:90,
		                format: function (x) { return x.getFullYear(); }
		              //format: '%Y' // format string is also available for timeseries data
		            }
		        }
		    },tooltip: {
		        grouped: false, // Default true
		        	format: {
		            title: function (d) { return d.name; },
		            value: function (value, ratio, id) {
			            (function ($) {
				            if (id != "Estados Unidos Mexicanos") {
        					      $( "#chart2 svg g.c3-chart-line g.c3-circles circle" ).css('fill','#ccc');
        								$( "#chart2 svg g.c3-chart-line path.c3-line" ).css('stroke','#ccc');

                        $( "svg g.c3-chart-line g.c3-circles-" +id.replace(/ /g,'-') + " circle" ).css('fill','#00aeef');
        								$( "svg g.c3-chart-line path.c3-line-" +id.replace(/ /g,'-') ).css('stroke','#00aeef');

        								$( "svg g.c3-chart-line g.c3-circles-Promedio-nacional circle" ).css('fill','#f00');
        								$( "svg g.c3-chart-line path.c3-line-Promedio-nacional" ).css('stroke','#f00');
                        $( "svg g.c3-chart-line g.c3-circles-Estados-Unidos-Mexicanos circle" ).css('fill','#f00');
        								$( "svg g.c3-chart-line path.c3-line-Estados-Unidos-Mexicanos" ).css('stroke','#f00');



				            }
				            else {
					            $( "#chart2 svg g.c3-chart-line g.c3-circles circle" ).css('fill','#ccc');
      								$( "#chart2 svg g.c3-chart-line path.c3-line" ).css('stroke','#ccc');

      					      $( "svg g.c3-chart-line g.c3-circles-Promedio-nacional circle" ).css('fill','#f00');
      								$( "svg g.c3-chart-line path.c3-line-Promedio-nacional" ).css('stroke','#f00');

                      $( "svg g.c3-chart-line g.c3-circles-Estados-Unidos-Mexicanos circle" ).css('fill','#f00');
                      $( "svg g.c3-chart-line path.c3-line-Estados-Unidos-Mexicanos" ).css('stroke','#f00');
				            }
			            }(jQuery));
		                return commaSeparateNumber(Math.round(value*10)/10);
		            }
		//            value: d3.format(',') // apply this format to both y and y2
		        }
		    },
		});
  </script>

  <script>
	function gen(props)
	{
	  var chart = c3.generate({
				bindto: '.info',
				padding: {
					top: 10,
			        left: 30,
			        right: 10
			    },
			    data: {
			        x: 'Entidad',
					columns: [
            ['Entidad','2016-01-01','2015-01-01','2014-01-01','2013-01-01','2012-01-01','2011-01-01','2010-01-01','2009-01-01','2008-01-01','2007-01-01','2006-01-01','2005-01-01','2004-01-01','2003-01-01','2002-01-01','2001-01-01','2000-01-01','1999-01-01','1998-01-01','1997-01-01','1996-01-01','1995-01-01','1994-01-01','1993-01-01','1992-01-01','1991-01-01','1990-01-01'],
	            props
		        ]


			    },
			    axis: {
			        x: {
			            type: 'timeseries',
			            tick: {
                       rotate:90,
		               		 format: function (x) { return x.getFullYear(); }
			            }
			        },
			        y : {
			            tick: {
			                format: d3.format(".2s")
			            }
			        }
			    },
			    color: {
			        pattern: ['#00AEEF']
			    },
			    size: {
			        width: 260,
			        height: 160
			    },
			    legend: {
			        show: false
			    },
			    grid: {
			        x: {
			            show: false
			        },
			        y: {
			            show: true
			        }
			    }

		});
	}
  </script>




    <script type="text/javascript">
var estados2 =[
['x', '2009-01-01', '2010-01-01', '2011-01-01', '2012-01-01', '2013-01-01'],
['Aguascalientes',      '122.24', '104.54',    '120.4',       '122.8',       '110.4'],
['Baja California',   '93.05',  '108.39',    '92.3',        '86.6',        '86.8'],
['Baja California Sur', '54.22',  '53.06',     '57',          '64.8',        '68.6'],
['Campeche',            '4.76',   '4.78',      '6.6',         '5.8',         '4.5'],
['Chiapas',             '15.8',   '20.36',     '16.6',        '18.9',        '18.5'],
['Chihuahua',           '64.18',  '68.05',     '68.1',        '72.8',        '74.4'],
['Coahuila',            '46.07',  '48.3',      '45.1',        '46.4',        '45.2'],
['Colima',              '43.64',  '51',        '51.7',        '52.1',        '59.6'],
['Distrito Federal',    '14.22',  '14.82',     '14.8',        '13.9',        '13.6'],
['Durango',             '57.85',  '59.15',     '61.8',        '65',          '60.6'],
['Guanajuato',          '46.08',  '45.38',     '46.6',        '50.2',        '59'],
['Guerrero',            '47.93',  '60.49',     '56.4',        '57.6',        '74.2'],
['Hidalgo',             '9.66',   '12',        '12',          '6.8',         '5.4'],
['Jalisco',             '23.37',  '25.75',     '35.5',        '46.3',        '51.9'],
['México',             '20.04',  '23.64',     '24.8',        '28',          '28.4'],
['Michoacán',           '26.06',  '26.59',     '26.4',        '27.3',        '32.1'],
['Morelos',             '18.82',  '18.79',     '25.4',        '26.4',        '23.5'],
['Nayarit',             '65.34',  '72.86',     '72.9',        '83.4',        '104.1'],
['Nuevo León',         '118.42', '112.14',    '108.3',       '109.5',       '117.2'],
['Oaxaca',              '27.4',   '28.18',     '27.6',        '28.4',        '33.3'],
['Puebla',              '35.49',  '36.59',     '46.1',        '43',          '53.9'],
['Querétaro',           '22.65',  '41.51',     '41.3',        '42.3',        '45.5'],
['Quintana Roo',       '60.49',  '57.37',     '61.5',        '55.6',        '55.6'],
['San Luis Potosí­',     '47.74',  '48.66',     '47.7',        '49.1',        '53.2'],
['Sinaloa',             '61.82',  '66.08',     '68.8',        '71.6',        '68'],
['Sonora',              '31.65',  '31.76',     '32',          '34.9',        '34.6'],
['Tabasco',             '18.31',  '19.93',     '19.9',        '20.7',        '25.3'],
['Tamaulipas',          '53.87',  '59.85',     '73.4',        '75.6',        '71.8'],
['Tlaxcala',            '53.49',  '54.42',     '49.1',        '48.4',        '43.1'],
['Veracruz',            '25.73',  '28.14',     '32.7',        '34.9',        '39.6'],
['Yucatán',             '1.63',   '2.65',      '2.1',         '2.1',         '2.6'],
['Zacatecas',           '13.79',  '18.81',     '21.4',        '23.1',        '35.5'],
];


function busqueda_estado(cadena)
{
  for(var i=0;i<estados.length;i++)
  {
    if(estados[i][0] == cadena)
    {
      console.log(cadena);
      return parseFloat(estados[i][1]);
    }
  }
}

function busqueda_estado_posicion(cadena,posicion)
{
  for(var i=0;i<estados.length;i++)
  {
    if(estados[i][0] == cadena)
    {
      console.log(cadena);
      return parseFloat(estados[i][posicion]);
    }
  }
}

function busqueda_anio(cadena)
{
  for(var i=0;i<estados[0].length;i++)
  {
    if(estados[0][i] == cadena)
    {
      console.log(estados[0][i]);
      return i;
    }
  }
}

    //variable de mapa
      var img;
      var data_url;
      var locked=false;
      var map = L.map('map' ,
      {
	        scrollWheelZoom: false,
	        maxZoom: 14,
			minZomm:5,
			//zoomControl:false,
			//dragging: false
      }).setView([24.8, -100], 5);

    //implementacion de mapa estandar y ubicacion haci como zoom
 //     L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw', {
	 	L.tileLayer('http://{s}.google.com/vt/?hl=es&x={x}&y={y}&z={z}&s={s}&apistyle=s.t%3A5|p.l%3A53%2Cs.t%3A1314|p.v%3Aoff%2Cp.s%3A-100%2Cs.t%3A3|p.v%3Aon%2Cs.t%3A2|p.v%3Aoff%2Cs.t%3A4|p.v%3Aoff%2Cs.t%3A3|s.e%3Ag.f|p.w%3A1|p.l%3A100%2Cs.t%3A18|p.v%3Aoff%2Cs.t%3A49|s.e%3Ag.s|p.v%3Aon|p.s%3A-19|p.l%3A24%2Cs.t%3A50|s.e%3Ag.s|p.v%3Aon|p.l%3A15&style=47,37', {
		subdomains:['mt0', 'mt1', 'mt2', 'mt3'],
        maxZoom: 14,
        minZomm:5,
        attribution: '&copy <a href="https://www.mapbox.com/map-feedback/">Mapbox</a> &copy <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> <strong><a href="https://www.mapbox.com/map-feedback/" target="_blank">Improve this map</a></strong>',
        id: 'mapbox.light',
      }).addTo(map);

      if( /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent) )
      {
			map.dragging.disable();
	  }



      // control that shows state info on hover
      var info = L.control();
      info.onAdd = function (map) {
        this._div = L.DomUtil.create('div', 'infos hide');
        this.update();
        return this._div;
      };




      info.update = function (props) {
	     //this._div = L.DomUtil.create('div', 'infos');
	     $('.infos').removeClass('hide');
	     $('.info2').removeClass('hide');
	     if(props != undefined)
	     {
		      this._div.innerHTML='<div><h5 style="font-weight:bold">' + props.nom_ent +'</h5><br><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b style="font-size: 20px;color: #00aeef;">' + busqueda_estado(props.nom_ent).toFixed(1)/*props.density*/ + '</b><p style="position: absolute; bottom: 54%; left: 35%;">Razón de <br>mortalidad materna</p></div></div><div class="info"></div>';

			  gen(estados[props.cve]);
	     }
/*
        this._div.innerHTML = '<div><h4>Aguas tratadas</h4>' +  (props ?
          '<b>' + props.nom_ent + '</b><br />' + props.density + '% avance</div>'
          : 'Situate sobre un estado')+'<div class="info"></div>';
          if(props != undefined)
		  {

		  }
*/
      };
      info.addTo(map);
      // get color depending on population density value
      // function getColor(d) {
      // 	return d > 1000 ? '#800026' :
      // 	       d > 500  ? '#BD0026' :
      // 	       d > 200  ? '#E31A1C' :
      // 	       d > 100  ? '#FC4E2A' :
      // 	       d > 50   ? '#FD8D3C' :
      // 	       d > 20   ? '#FEB24C' :
      // 	       d > 10   ? '#FED976' :
      // 	                  '#FFEDA0';
      // }

      function getColor(d) {
        return d > 100 ? '#004b67' :
               d > 50  ? '#007dab' :
               d > 20  ? '#01baff' :
                         '#45ccff';
      }

      function getColoR(number)
      {
	    return brew.getColorInRange(number);
	  }

      function style(feature) {
	    var res=String(getColoR(busqueda_estado(feature.properties.nom_ent))).split(",");
      console.log(res,'hhhh',"c"+res[1]);
	    //console.log("hola->",res[1]);
        return {
          weight: 0.5,
          opacity: 1,
          color: '#000',
          dashArray: '1',
          fillOpacity: 0.6,
          // fillColor: getColoR(feature.properties.density),
          fillColor: getColoR(busqueda_estado(feature.properties.nom_ent)),
           className: "c"+res[1]
        };
      }
      function highlightFeature(e) {
	     if(locked == false)
	     {
	        var layer = e.target;
	        layer.setStyle({
	          weight: 2,
	          color: '#ccc',
	          dashArray: '',
	          fillOpacity: 0.7
	        });
	        if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
	          layer.bringToFront();
	        }
	        info.update(layer.feature.properties);
	     }
      }
      var geojson;
      function resetHighlight(e) {
/*
	     if(locked == false)
	     {
*/
		     geojson.resetStyle(e.target);
			 info.update();
// 	 	 }
      }
      function zoomToFeature(e) {
        map.fitBounds(e.target.getBounds());
      }
      function onEachFeature(feature, layer) {
        layer.on({
          mouseover: highlightFeature,
          mouseout: resetHighlight,
          mousedown: function(e)
          {
			if (locked == true) {
				locked = false;
				(function ($) {
								 $(".info2").css("border","none");
								 $(".infos").css("border","none");
							   }(jQuery));
			}
			else {
				locked = true;
				(function ($) {
							//	$(".info2").css("border","5px solid #00cc99");
								$(".info2").css("border-bottom","5px solid rgb(107, 174, 214)");
								$(".info2").css("border-left","5px solid rgb(107, 174, 214)");
								$(".info2").css("border-right","5px solid rgb(107, 174, 214)");
								$(".infos").css("border-top","5px solid rgb(107, 174, 214)");
								$(".infos").css("border-left","5px solid rgb(107, 174, 214)");
								$(".infos").css("border-right","5px solid rgb(107, 174, 214)");
//								$(".infos").css("border","5px solid #00cc99");
							   }(jQuery));
			}
// 			resetHighlight(e);
		 },
//          click: zoomToFeature
        });
      }

      function highlightFromLegend(e)
      	{
	      	//console.log(e);
			(function ($) {
				$("svg path."+e).addClass("highlighted");
				var r=$("svg path."+e);
				for(var i=0;i<r.length;i++)
				{
					r[i].classList.add("highlighted");
					//console.log(r[i]);
				}
				//console.log($("svg path."+e));
			}(jQuery));
		}

		function clearHighlight() {
			(function ($) {

				$("path").removeClass("highlighted");
				var r=$("path");
				for(var i=0;i<r.length;i++)
				{
					r[i].classList.remove("highlighted");
				}
				//console.log(r);
			}(jQuery));
		}

		var brew = new classyBrew();
		var values = [];
    var values2 = [];
		for (var i = 0; i < statesData.features.length; i++)
    {
      console.log(statesData.features[i].properties.nom_ent);
      if (statesData.features[i].properties.nom_ent == null) continue;
			values.push(busqueda_estado(statesData.features[i].properties.nom_ent));
			// if (statesData.features[i].properties.density == null) continue;
			// values2.push(statesData.features[i].properties.density);
		}

    console.log(values,values2);
		brew.setSeries(values);
		brew.setNumClasses(4);
		brew.setColorCode("Blues");
		brew.classify('jenks');
/*
      geojson = L.geoJson(statesData, {
        style: style,
        onEachFeature: onEachFeature
      }).addTo(map);
*/

/*
	  geojson = L.geoJson(municipio, {
        style: style,
        onEachFeature: onEachFeature
      }).addTo(map);

	  geojson = L.geoJson(entidad, {
        style: style,
        onEachFeature: onEachFeature
      }).addTo(map);
*/

      geojson = L.geoJson(statesData, {
        style: style,
        onEachFeature: onEachFeature
      }).addTo(map);

/*
      geojson = L.geoJson(nacion, {
        style: style,
        onEachFeature: onEachFeature
      }).addTo(map);
*/

      map.attributionControl.addAttribution('');
      var legend = L.control();
      legend.onAdd = function (map) {
        var div = L.DomUtil.create('div', 'info2 legend hide'),
          grades = brew.getBreaks(),//[0, 20, 50, 100],
          labels = [],
          from, to;
        for (var i = 0; i < grades.length-1; i++) {
          from = grades[i];
          to = grades[i + 1];
          var res=String(getColoR(from)).split(",");
          console.log(from,from+1,res,grades);
          labels.push(
            '<div style="float:left; text-align: center;"><i class="leyenda" onmouseover="highlightFromLegend(\'c'+ res[1] +'\')" onmouseout="clearHighlight();" style="width:100%; background:' + getColoR(from) + '"></i><br>' +
            from.toFixed(2) + (to.toFixed(2) ? '&ndash;' + to.toFixed(2) : '+')+'</div>');
        }
        div.innerHTML = labels.join('');
        return div;
      };
      legend.addTo(map);

      setTimeout(function() {




  }, 3000);


    </script>
    <script>
        $(document).ready(function() {
            $('body').sectionScroll(); // Easy Peasy Lemon Squeezy
            $('.tooltip').tooltipster({
    				contentCloning: true,
    				animation: 'fade',
    				delay: 200,
    				theme: 'tooltipster-light',
    				trigger: 'hover'
                });
            // var cadena='</div></select>';
            var cadena='';
            for(var i=1;i<=7;i++)
            {
              if(i == 1)
              {
                cadena='<a id="anio_'+i+'" class="inactive_anio waves-effect waves-light btn color  claro t_sm sin_sombra marg_top" onclick="cambio_anio(\''+estados[0][i]+'\','+i+')" style ="margin-right: -1px; border-color: black; border-width: 1px; border-radius: 0px 5px 5px 0px;">'+estados[0][i].split('-')[0]+'</a>'+cadena;
                console.log(i);
              }
              else if(i == 7)
              {
                cadena='<a id="anio_'+i+'" class="inactive_anio waves-effect waves-light btn color  claro t_sm sin_sombra marg_top" onclick="cambio_anio(\''+estados[0][i]+'\','+i+')" style ="margin-right: -1px; border-color: black; border-width: 1px; border-radius: 5px 0px 0px 5px;">'+estados[0][i].split('-')[0]+'</a>'+cadena;
                console.log(i,'break');
                break;
              }
              else if(i < estados[0].length-1)
              {
                cadena='<a id="anio_'+i+'" class="inactive_anio waves-effect waves-light btn color  claro t_sm sin_sombra marg_top" onclick="cambio_anio(\''+estados[0][i]+'\','+i+')" style ="margin-right: -1px; border-color: black; border-width: 1px; border-radius: 0;">'+estados[0][i].split('-')[0]+'</a>'+cadena;
                console.log(i);
              }
              // cadena='<option value="'+estados[0][i]+'">'+estados[0][i].split('-')[0]+'</option>'+cadena;
            }
            // cadena='<a class="waves-effect waves-light btn color  black-text t_sm sin_sombra marg_top" style="border-style: none;">Año</a><select id="opciones_anio" onchange="cambio_anio()" style="display:block;"><option value=" " disabled selected>Selecciona un año</option>'+cadena;
            cadena='<a class="waves-effect waves-light btn color  black-text t_sm sin_sombra marg_top" style="border-style: none;">Año</a>'+cadena;
            $('#anios').html(cadena);

        });


        function cambio_anio(cadena, i)
        {
          for(var j=1;j<=7;j++)
          {
            $('#anio_'+j).removeClass('active_anio');
            $('#anio_'+j).addClass('inactive_anio');
          }
          $('#anio_'+i).removeClass('inactive_anio');
          $('#anio_'+i).addClass('active_anio');
          // $('#map').html('');
          $('.infos').remove();
          $('.info2').remove();
          var anio_buscar=$('#opciones_anio').val();
          var posi = busqueda_anio(cadena);

          locked =false;

          var info = L.control();
          info.onAdd = function (map) {
            this._div = L.DomUtil.create('div', 'infos hide');
            this.update();
            return this._div;
          };
          info.update = function (props) {
    	     $('.infos').removeClass('hide');
    	     $('.info2').removeClass('hide');
    	     if(props != undefined)
    	     {
    		      this._div.innerHTML='<div><h5 style="font-weight:bold">' + props.nom_ent +'</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b style="font-size: 20px;color: #00aeef;">' + busqueda_estado_posicion(props.nom_ent,posi).toFixed(1) + '</b></p><p style="position: absolute; top: 15%; left: 35%;">Razón de <br>mortalidad materna</p></div><div class="info"></div>';

    			  gen(estados[props.cve]);
    	     }
          };
          info.addTo(map);

          function getColor(d) {
            return d > 100 ? '#004b67' :
                   d > 50  ? '#007dab' :
                   d > 20  ? '#01baff' :
                             '#45ccff';
          }

          function getColoR(number)
          {
    	    return brew.getColorInRange(number);
    	  }

          function style(feature) {
    	    var res=String(getColoR(busqueda_estado_posicion(feature.properties.nom_ent,posi))).split(",");
          console.log(res,'hhhh',"c"+res[1]);
            return {
              weight: 0.5,
              opacity: 1,
              color: '#000',
              dashArray: '1',
              fillOpacity: 0.6,
              fillColor: getColoR(busqueda_estado_posicion(feature.properties.nom_ent,posi)),
               className: "c"+res[1]
            };
          }
          function highlightFeature(e) {
    	     if(locked == false)
    	     {
    	        var layer = e.target;
    	        layer.setStyle({
    	          weight: 2,
    	          color: '#ccc',
    	          dashArray: '',
    	          fillOpacity: 0.7
    	        });
    	        if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
    	          layer.bringToFront();
    	        }
    	        info.update(layer.feature.properties);
    	     }
          }
          var geojson;
          function resetHighlight(e) {
    		     geojson.resetStyle(e.target);
    			 info.update();
          }
          function zoomToFeature(e) {
            map.fitBounds(e.target.getBounds());
          }
          function onEachFeature(feature, layer) {
            layer.on({
              mouseover: highlightFeature,
              mouseout: resetHighlight,
              mousedown: function(e)
              {
    			if (locked == true) {
    				locked = false;
    				(function ($) {
    								 $(".info2").css("border","none");
    								 $(".infos").css("border","none");
    							   }(jQuery));
    			}
    			else {
    				locked = true;
    				(function ($) {
    								$(".info2").css("border-bottom","5px solid rgb(107, 174, 214)");
    								$(".info2").css("border-left","5px solid rgb(107, 174, 214)");
    								$(".info2").css("border-right","5px solid rgb(107, 174, 214)");
    								$(".infos").css("border-top","5px solid rgb(107, 174, 214)");
    								$(".infos").css("border-left","5px solid rgb(107, 174, 214)");
    								$(".infos").css("border-right","5px solid rgb(107, 174, 214)");
    							   }(jQuery));
    			}
    		 },
            });
          }

          function highlightFromLegend(e)
          	{
    			(function ($) {
    				$("svg path."+e).addClass("highlighted");
    				var r=$("svg path."+e);
    				for(var i=0;i<r.length;i++)
    				{
    					r[i].classList.add("highlighted");
    				}
    			}(jQuery));
    		}

    		function clearHighlight() {
    			(function ($) {

    				$("path").removeClass("highlighted");
    				var r=$("path");
    				for(var i=0;i<r.length;i++)
    				{
    					r[i].classList.remove("highlighted");
    				}
    			}(jQuery));
    		}

    		var brew = new classyBrew();
    		var values = [];
        var values2 = [];
    		for (var i = 0; i < statesData.features.length; i++)
        {
          console.log(statesData.features[i].properties.nom_ent);
          if (statesData.features[i].properties.nom_ent == null) continue;
    			values.push(busqueda_estado_posicion(statesData.features[i].properties.nom_ent,posi));
    		}

        console.log(values,values2);
    		brew.setSeries(values);
    		brew.setNumClasses(4);
    		brew.setColorCode("Blues");
    		brew.classify('jenks');

          geojson = L.geoJson(statesData, {
            style: style,
            onEachFeature: onEachFeature
          }).addTo(map);

          map.attributionControl.addAttribution('');
          var legend = L.control();
          legend.onAdd = function (map) {
            var div = L.DomUtil.create('div', 'info2 legend hide'),
              grades = brew.getBreaks(),//[0, 20, 50, 100],
              labels = [],
              from, to;
            for (var i = 0; i < grades.length-1; i++) {
              from = grades[i];
              to = grades[i + 1];
              var res=String(getColoR(from)).split(",");
              console.log(from,from+1,res,grades);
              labels.push(
                '<div style="float:left; text-align: center;"><i class="leyenda" onmouseover="highlightFromLegend(\'c'+ res[1] +'\')" onmouseout="clearHighlight();" style="width:100%; background:' + getColoR(from) + '"></i><br>' +
                from.toFixed(2) + (to.toFixed(2) ? '&ndash;' + to.toFixed(2) : '+')+'</div>');
            }
            div.innerHTML = labels.join('');
            return div;
          };
          legend.addTo(map);

        }


    function nodeToString ( node )
		{
			var tmpNode = document.createElement( "div" );
			tmpNode.appendChild( node.cloneNode( true ) );
			var str = tmpNode.innerHTML;
			tmpNode = node = null; // prevent memory leaks in IE
			return str;
		}


      $('#pdf_descarga').click(function()
			{
            var copias_canvas;
        leafletImage(map, function(err, canvas) {
    				// now you have canvas
    				// example thing to do with that canvas:
    				console.log("Ya lo hizo");
    				img = document.createElement('img');
    				var dimensions = map.getSize();
    				img.width = dimensions.x;
    				img.height = dimensions.y;
    				img.src = canvas.toDataURL();
    				data_url = canvas.toDataURL();
    			//	document.getElementById('images').innerHTML = '';
    				document.getElementById('images').appendChild(img);

            var mapa = document.getElementById('map');
            var svg = mapa.childNodes[0].childNodes[2].childNodes[0].innerHTML;
            document.getElementById('copia').innerHTML='<canvas id="canvas_todo" width="1298px" height="600px"></canvas>';
            var canvas = document.getElementById('canvas_todo');
            canvg(canvas, svg);
            normal = canvas.toDataURL('image/png');

            document.getElementById('copias').innerHTML='<canvas id="canvas_tol" width="1298px" height="600px"></canvas>';
            var canvas2 = document.getElementById('canvas_tol');
            var c = mapa.childNodes[1].childNodes[1].childNodes[0].childNodes[1].childNodes[0].childNodes[1].childNodes[4].childNodes[2].childNodes[0].childNodes[0].childNodes[0].style.fill='none';


             var c = mapa.childNodes[1].childNodes[1].childNodes[0].childNodes[1].childNodes[0].childNodes[1].childNodes;

//[7].childNodes
            for(var j=0;j<c.length;j++)
            {
              console.log(c[j],c[j].classList.value);
              if(c[j].classList.value === 'domain')
              {
                c[j].style.fill='none';
                c[j].style.stroke='#000';
                // c[j].childNodes[z].style.display='none';
              }
              if (c[j].firstChild)
              {
                //console.log("tiene hijos");
                for(var z=0;z<c[j].childNodes.length;z++)
                {
                  // console.log(c[j].childNodes[z]);
                  if(c[j].childNodes[z].className != undefined)
                  {
                    if(c[j].childNodes[z].classList.value === 'domain')
                    {
                      //console.log("->"+c[j].childNodes[z].tagName);
                      c[j].style.fill='none';
                      c[j].style.stroke='#000';
                      // c[j].childNodes[z].style.display='none';
                    }
                  }
                }
              }
              if(c[j].className != undefined)
              {
                if(c[j].classList.value == 'line')
                {
                  c[j].style.fill='none';
                  console.log(c[j]);
                }
                if(c[j].classList.value == 'x-axis-label')
                {
                  c[j].style.display='none';
                }
              }
            }
            var svg2 = nodeToString(mapa.childNodes[1].childNodes[1].childNodes[0].childNodes[1].childNodes[0]);
            canvg(canvas2, svg2);

            html2canvas(mapa.childNodes[1].childNodes[1], {
                onrendered: function(canvas) {
                    theCanvas = canvas;
                    $("#copias").append(canvas);
                    copias_canvas= canvas.toDataURL('image/png');
                }
            });

            html2canvas($("#map"), {
                onrendered: function(canvas) {
                    theCanvas = canvas;
                    $("#fondo").append(canvas);
                    fondo = document.getElementById('fondo').childNodes[0].toDataURL('image/png');
                    $('#todo').html('<div id="todo_junto" style="width:1298px; height:600px; background-image: url('+normal+'), url('+data_url+'); background-repeat: no-repeat;"><div style="width:296px; height:314px;  background-image: url('+copias_canvas+'); background-repeat: no-repeat;"><img src="'+document.getElementById('canvas_tol').toDataURL('image/png')+'" style="margin-top: 100px; margin-left: 10px;"></div></div>');

                    html2canvas($("#todo"), {
                        onrendered: function(canvas) {
                            theCanvas = canvas;
                            // document.body.appendChild(canvas);
                            // Canvas2Image.saveAsPNG(canvas);
                            $("#todo_listo").append(canvas);
                            todo = document.getElementById('todo_listo').childNodes[0].toDataURL('image/png');
                            console.log(todo);
                            var method = "post";
                    				var form = document.createElement("form");
                    				form.setAttribute("method", method);
                    				form.setAttribute("action", "generar.php");
                            var hiddenField = document.createElement("input");
                    				hiddenField.setAttribute("type", "hidden");
                    				hiddenField.setAttribute("name", "todo_ya");
                    				hiddenField.setAttribute("value", todo);
                    				form.appendChild(hiddenField);
                    				document.getElementById('forms').appendChild(form);
                    				console.log("Envia");
                    				form.submit();
                        }
                    });
                }
            });
    		});

      });


      var lupa = false;

      function esconder() {
        console.log("focusout");
        $('#cam_bus').hide();
        $('#buscar').show();
        lupa = false;
      }

        $(document).ready(function() {
          $("#sti").hide();

          window.onload = function () {

            $('#buscar').click(function () {
              console.log("aca");
              if (lupa) {
                $('#cam_bus').hide();
                lupa = false;
              } else {
                $('#cam_bus').show();
                $('#buscar').hide();
                document.getElementById("cam_bus").focus();
                lupa = true;
              }
            });

          }


        });
    </script>

  </body>
</html>
